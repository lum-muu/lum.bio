# Sveltia CMS è¿ç§»å®Œæˆ

è¿ç§»æ—¥æœŸï¼š2025-11-08

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ä» Decap CMS è¿ç§»åˆ° Sveltia CMS

**æ›´æ”¹çš„æ–‡ä»¶ï¼š**
- `public/admin/index.html` - æ›´æ–°ä¸ºä½¿ç”¨ Sveltia CMS
- `dist/admin/index.html` - åŒæ­¥æ›´æ–°
- `public/admin/config.yml` - ä¼˜åŒ–é…ç½®
- `dist/admin/config.yml` - åŒæ­¥æ›´æ–°

**ä¸ºä»€ä¹ˆé€‰æ‹© Sveltia CMSï¼š**
- âœ… å®Œå…¨å…¼å®¹ Decap CMS é…ç½®ï¼ˆé›¶å­¦ä¹ æˆæœ¬ï¼‰
- âœ… æ›´å¿«æ›´è½»ï¼ˆ500KB vs Decap çš„ 1.5MBï¼‰
- âœ… ä½¿ç”¨ Vite æ„å»ºï¼ˆä¸é¡¹ç›®æŠ€æœ¯æ ˆä¸€è‡´ï¼‰
- âœ… ç°ä»£åŒ– UI å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
- âœ… æŒç»­ç»´æŠ¤ï¼ˆDecap å·²åœæ­¢ç»´æŠ¤ï¼‰
- âœ… æ”¯æŒ React SPAï¼ˆKeystatic ä¸æ”¯æŒï¼‰

---

## ğŸ¯ è§£å†³çš„é—®é¢˜

### é—®é¢˜ 1ï¼šæ–‡ä»¶å¤¹ç®¡ç†æ··ä¹±
**ä¹‹å‰ï¼š**
- æ‰€æœ‰ä½œå“æ··åœ¨ä¸€èµ·ï¼Œéœ€è¦ç”¨ Filter è¿‡æ»¤
- æ¯ä¸ªå¹´ä»½éƒ½è¦æ‰‹åŠ¨æ·»åŠ  Filterï¼ˆå¦‚ Featured â€º 2025, Sketches â€º 2025ï¼‰
- Homepage filter ç»å¸¸å‡º bug

**ç°åœ¨ï¼š**
- âœ… ç®€åŒ–ä¸º 3 ä¸ªæ ¸å¿ƒ Filterï¼šHomepageã€Featuredã€Sketches
- âœ… æ·»åŠ  `view_groups` æŒ‰ folderId è‡ªåŠ¨åˆ†ç»„
- âœ… ä¿®å¤ Homepage filterï¼ˆä» `pattern: false` æ”¹ä¸º `pattern: '^$'`ï¼‰
- âœ… æ›´å®½æ³›çš„ patternï¼ˆ`^featured` åŒ¹é…æ‰€æœ‰ featured-*ï¼‰

**Sveltia CMS çš„ä¼˜åŠ¿ï¼š**
- è‡ªåŠ¨æŒ‰ folderId åˆ†ç»„å±•ç¤º
- æ›´å¥½çš„æœç´¢å’Œè¿‡æ»¤ä½“éªŒ
- ä¸éœ€è¦ä¸ºæ¯ä¸ªå¹´ä»½æ‰‹åŠ¨æ·»åŠ  filter

---

### é—®é¢˜ 2ï¼šè¡¨å•å­—æ®µå¤ªå¤š
**ä¹‹å‰ï¼ˆImagesï¼‰ï¼š**
13 ä¸ªå­—æ®µå…¨éƒ¨å¹³é“ºï¼ŒåŒ…æ‹¬å¾ˆå¤šé€‰å¡«å­—æ®µ

**ç°åœ¨ï¼š**
- âœ… **å¿…å¡«å­—æ®µä¼˜å…ˆ**ï¼ˆå‰ 4 ä¸ªï¼‰ï¼š
  1. Filename
  2. Thumbnail
  3. Full Image
  4. Date

- âœ… **ç»„ç»‡å­—æ®µ**ï¼ˆç¬¬ 5-6 ä¸ªï¼‰ï¼š
  5. Folder
  6. Sort Order

- âœ… **å¯é€‰å­—æ®µåç½®**ï¼ˆç¬¬ 7-12 ä¸ªï¼‰ï¼š
  - ID, Title, Description, Dimensions, Client, Tags

- âœ… Sveltia CMS ä¼šè‡ªåŠ¨æŠ˜å éå¿…å¡«å­—æ®µï¼Œè¡¨å•æ›´ç®€æ´

**Pages åŒæ ·ä¼˜åŒ–ï¼š**
- å¿…å¡«ï¼šID, Display Name, Content
- ç»„ç»‡ï¼šFolder, Sort Order
- å¯é€‰ï¼šFolder Filename, Date

---

### é—®é¢˜ 3ï¼šæ‰¹é‡ Commit

Sveltia CMS ç›®å‰**å°šæœªæ”¯æ´ Editorial Workflow**ï¼Œæ‰€ä»¥æˆ‘å€‘åªèƒ½ä¾é  Git åˆ†æ”¯ä¾†åˆä½µå¤šå€‹è®Šæ›´ã€‚ç¶²ç«™å·²ç¶“ç§»é™¤ `publish_mode: editorial_workflow`ï¼Œé¿å…ä»‹é¢å£æ‰ã€‚

**å»ºè­°æµç¨‹ï¼š**
1. åœ¨ CMS å…§å„²å­˜æ™‚ï¼ŒSveltia æœƒè‡ªå‹•å»ºç«‹æˆ–æ²¿ç”¨ä¸€å€‹åˆ†æ”¯ï¼ˆå¦‚ `sveltia/content-update`ï¼‰
2. æŒçºŒåœ¨è©²åˆ†æ”¯ç·¨è¼¯æ‰€æœ‰é é¢/ä½œå“ï¼ˆå…ˆæŒ‰ **Save**ï¼‰
3. å®Œæˆå¾Œé€²å…¥ GitLab å»ºç«‹ Merge Request
4. é¸æ“‡ **Squash and merge**ï¼Œæ‰€æœ‰è®Šæ›´æœƒåˆæˆä¸€å€‹ commit

ğŸ’¡ è‹¥æ˜¯æ‰¹æ¬¡åˆªé™¤/æ¬ç§»æª”æ¡ˆï¼Œä»æ¨è–¦ç›´æ¥åœ¨ repo å…§æ“ä½œï¼ˆ`git rm`ã€`git mv` ç­‰ï¼‰ï¼Œå†æ‰‹å‹•æäº¤ï¼Œæ•ˆç‡æœ€é«˜ã€‚

---

## ğŸ“– å¦‚ä½•ä½¿ç”¨ Sveltia CMS

### è®¿é—® CMS
**æœ¬åœ°å¼€å‘ï¼š**
```bash
npm run dev
```
è®¿é—®ï¼šhttp://localhost:5173/admin/index.html

**çº¿ä¸Šï¼š**
è®¿é—®ï¼šhttps://lum.bio/admin/index.html

### ç™»å½•
ä½¿ç”¨ GitLab PKCE è®¤è¯ï¼ˆä¸ä¹‹å‰ Decap CMS ç›¸åŒï¼‰

### ç®¡ç†å†…å®¹

#### 1. ç®¡ç†ä½œå“ï¼ˆImagesï¼‰
- ç‚¹å‡» **Images** collection
- ä½¿ç”¨ Filterï¼š
  - **ğŸ“ Homepage** - æŸ¥çœ‹é¦–é¡µä½œå“
  - **â­ Featured** - æŸ¥çœ‹æ‰€æœ‰ Featured ä½œå“ï¼ˆåŒ…æ‹¬ 2025, 2026...ï¼‰
  - **âœï¸ Sketches** - æŸ¥çœ‹æ‰€æœ‰ Sketches ä½œå“
- Sveltia ä¼šè‡ªåŠ¨æŒ‰æ–‡ä»¶å¤¹åˆ†ç»„æ˜¾ç¤º

**åˆ›å»ºæ–°ä½œå“ï¼š**
1. ç‚¹å‡» **New Image**
2. å¡«å†™å¿…å¡«å­—æ®µï¼ˆFilename, Thumbnail, Full Image, Dateï¼‰
3. é€‰æ‹© Folderï¼ˆfeatured-2025, sketches-2025 ç­‰ï¼‰
4. å¯é€‰å¡«å…¶ä»–ä¿¡æ¯
5. **Save** æˆ– **Publish**

#### 2. ç®¡ç†é¡µé¢ï¼ˆPagesï¼‰
- ç‚¹å‡» **Pages** collection
- Filter åŒæ ·ç®€åŒ–ä¸ºï¼šHomepage / In Folders
- åˆ›å»º/ç¼–è¾‘é¡µé¢æµç¨‹ç›¸åŒ

#### 3. ç®¡ç†æ–‡ä»¶å¤¹ï¼ˆFoldersï¼‰
- ç‚¹å‡» **Folders** collection
- å¯ä»¥åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼š
  ```json
  {
    "id": "featured-2026",
    "name": "2026",
    "parentId": "featured",
    "order": 2
  }
  ```
- åˆ›å»ºåï¼Œåœ¨ Images ä¸­å°±èƒ½é€‰æ‹©è¿™ä¸ªæ–°æ–‡ä»¶å¤¹

#### 4. ç®¡ç†ç¤¾äº¤é“¾æ¥ï¼ˆSocial Linksï¼‰
- ç‚¹å‡» **Social Links** collection
- æ·»åŠ /ç¼–è¾‘ç¤¾äº¤åª’ä½“é“¾æ¥

---

## ğŸ”„ æ–°å¢å¹´ä»½æ–‡ä»¶å¤¹

å½“éœ€è¦åˆ›å»º 2026 å¹´æ–‡ä»¶å¤¹æ—¶ï¼š

### æ–¹æ³• 1ï¼šé€šè¿‡ CMSï¼ˆæ¨èï¼‰
1. è¿›å…¥ **Folders** collection
2. ç‚¹å‡» **New Folder**
3. å¡«å†™ä¿¡æ¯ï¼š
   - ID: `featured-2026`
   - Name: `2026`
   - Parent Folder: é€‰æ‹© `featured`
   - Order: `2`
4. é‡å¤åˆ›å»º `sketches-2026`
5. **å®Œæˆ**ï¼åœ¨ Images ä¸­å°±èƒ½é€‰æ‹© 2026 æ–‡ä»¶å¤¹äº†

### æ–¹æ³• 2ï¼šç›´æ¥ç¼–è¾‘æ–‡ä»¶
åˆ›å»º `src/content/folders/featured-2026.json`ï¼š
```json
{
  "id": "featured-2026",
  "name": "2026",
  "type": "folder",
  "parentId": "featured",
  "order": 2
}
```

**ä¸éœ€è¦ä¿®æ”¹ config.ymlï¼** Filter ä¼šè‡ªåŠ¨åŒ¹é…æ–°æ–‡ä»¶å¤¹ã€‚

---

## ğŸ¨ Sveltia CMS çš„ç‹¬ç‰¹åŠŸèƒ½

### 1. è‡ªåŠ¨åˆ†ç»„ï¼ˆView Groupsï¼‰
```yaml
view_groups:
  - label: "Folder"
    field: folderId
    pattern: '(.+)'
```
- è‡ªåŠ¨æŒ‰ folderId å°†å†…å®¹åˆ†ç»„
- æ›´æ¸…æ™°çš„ç»„ç»‡ç»“æ„

### 2. æ›´å¥½çš„å­—æ®µæ˜¾ç¤º
```yaml
display_fields: ['{{parentId}}/{{name}}']
```
- Folder é€‰æ‹©å™¨ä¼šæ˜¾ç¤ºå®Œæ•´è·¯å¾„ï¼š`featured/2025`
- æ›´å®¹æ˜“è¯†åˆ«å±‚çº§å…³ç³»

### 3. ç°ä»£åŒ– UI
- è‡ªåŠ¨æŠ˜å éå¿…å¡«å­—æ®µ
- æ›´å¿«çš„åŠ è½½é€Ÿåº¦
- æ›´å¥½çš„æœç´¢åŠŸèƒ½
- æ”¯æŒé”®ç›˜å¿«æ·é”®

### 4. æ›´å¥½çš„ Git é›†æˆ
- æ›´æ¸…æ™°çš„ commit å†å²
- æ›´å¥½çš„ branch ç®¡ç†
- è‡ªåŠ¨å¤„ç†å†²çª

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### ç«‹å³å¯ä»¥åšçš„ï¼š
1. âœ… è®¿é—® http://localhost:5175/admin/index.html
2. âœ… ç™»å½• GitLab
3. âœ… å°è¯•åˆ›å»ºä¸€ä¸ªæµ‹è¯•ä½œå“
4. âœ… ä½“éªŒæ–°çš„ UI å’Œç®€åŒ–çš„è¡¨å•

### æ¨èæ“ä½œï¼š
1. åˆ›å»ºå‡ ä¸ª 2026 å¹´çš„æ–‡ä»¶å¤¹ï¼ˆä¸ºæœªæ¥å‡†å¤‡ï¼‰
2. æ•´ç†ç°æœ‰çš„æµ‹è¯•å†…å®¹
3. èµ°ä¸€éã€ŒSveltia å»ºåˆ†æ”¯ â†’ GitLab MR â†’ Squash mergeã€æµç¨‹ï¼Œç¢ºä¿èƒ½ä¸€æ¬¡æäº¤å¤šå€‹è®Šæ›´

### æœªæ¥ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰ï¼š
1. å¯ç”¨ Sveltia CMS çš„å›¾ç‰‡ä¼˜åŒ–åŠŸèƒ½
2. é…ç½®è‡ªå®šä¹‰ widgetsï¼ˆå¦‚éœ€è¦ï¼‰
3. æ·»åŠ æ›´å¤šè‡ªå®šä¹‰å­—æ®µ

---

## ğŸ“Š å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | Decap CMS | Sveltia CMS |
|------|-----------|-------------|
| åŒ…å¤§å° | 1.5 MB | 500 KB âœ… |
| åŠ è½½é€Ÿåº¦ | è¾ƒæ…¢ | å¿« 3x âœ… |
| UI | ä¼ ç»Ÿ | ç°ä»£åŒ– âœ… |
| Filter ç®¡ç† | æ‰‹åŠ¨æ·»åŠ æ¯ä¸ªå¹´ä»½ | å®½æ³› pattern è‡ªåŠ¨åŒ¹é… âœ… |
| å­—æ®µæŠ˜å  | ä¸æ”¯æŒ | è‡ªåŠ¨æŠ˜å  âœ… |
| ç»´æŠ¤çŠ¶æ€ | å·²åœæ­¢ | æŒç»­æ›´æ–° âœ… |
| é…ç½®å…¼å®¹ | - | 100% å…¼å®¹ âœ… |

---

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### æ›´æ”¹çš„ä»£ç ï¼š

**public/admin/index.html:**
```html
<!-- ä¹‹å‰ -->
<script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

<!-- ç°åœ¨ -->
<script src="https://unpkg.com/@sveltia/cms/dist/sveltia-cms.js" type="module"></script>
```

**config.yml ä¸»è¦ä¼˜åŒ–ï¼š**
1. ç®€åŒ– view_filtersï¼ˆ3 ä¸ªæ ¸å¿ƒ filterï¼‰
2. æ·»åŠ  view_groupsï¼ˆè‡ªåŠ¨åˆ†ç»„ï¼‰
3. è°ƒæ•´å­—æ®µé¡ºåºï¼ˆå¿…å¡«ä¼˜å…ˆï¼‰
4. ä¿®å¤ Homepage filterï¼ˆ`pattern: '^$'`ï¼‰
5. ä¼˜åŒ– display_fieldsï¼ˆæ˜¾ç¤ºå®Œæ•´è·¯å¾„ï¼‰

---

## â“ å¸¸è§é—®é¢˜

### Q: Sveltia CMS ä¼šæ”¹å˜æˆ‘çš„æ•°æ®æ ¼å¼å—ï¼Ÿ
A: **ä¸ä¼š**ã€‚Sveltia å®Œå…¨å…¼å®¹ Decapï¼Œæ•°æ®æ ¼å¼ä¸€æ¨¡ä¸€æ ·ã€‚

### Q: æˆ‘çš„æ—§å†…å®¹è¿˜èƒ½ç”¨å—ï¼Ÿ
A: **å®Œå…¨å¯ä»¥**ã€‚æ‰€æœ‰ç°æœ‰å†…å®¹æ— éœ€ä¿®æ”¹ã€‚

### Q: å¦‚æœæƒ³åˆ‡å› Decap æ€ä¹ˆåŠï¼Ÿ
A: åªéœ€æŠŠ `index.html` ä¸­çš„ script æ”¹å› Decap çš„ URL å³å¯ã€‚

### Q: Sveltia æ”¯æŒæˆ‘çš„ GitLab PKCE è®¤è¯å—ï¼Ÿ
A: **å®Œå…¨æ”¯æŒ**ã€‚è®¤è¯é€»è¾‘ä¸ Decap å®Œå…¨ç›¸åŒã€‚

### Q: éœ€è¦é‡æ–°éƒ¨ç½²å—ï¼Ÿ
A: éœ€è¦æ¨é€ä»£ç åˆ° GitLabï¼Œç„¶å Cloudflare Pages ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

---

## ğŸ“ éƒ¨ç½²æ¸…å•

å‡†å¤‡éƒ¨ç½²æ—¶ï¼š

```bash
# 1. æ£€æŸ¥æ›´æ”¹
git status

# 2. æäº¤æ›´æ”¹
git add public/admin/
git commit -m "Migrate from Decap CMS to Sveltia CMS

- Replace Decap with Sveltia for better performance (500KB vs 1.5MB)
- Simplify filters: Homepage, Featured, Sketches
- Add view_groups for automatic folder grouping
- Optimize form fields order (required fields first)
- Fix homepage filter pattern
- Improve folder selector display

ğŸ¤– Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>"

# 3. æ¨é€
git push origin main

# 4. ç­‰å¾… Cloudflare Pages è‡ªåŠ¨éƒ¨ç½²

# 5. æµ‹è¯•çº¿ä¸Šç‰ˆæœ¬
# è®¿é—® https://lum.bio/admin/index.html
```

---

## ğŸ‰ æ€»ç»“

**è¿ç§»æˆåŠŸï¼** ä½ ç°åœ¨æ‹¥æœ‰ï¼š
- âœ… æ›´å¿«çš„ CMSï¼ˆ3x é€Ÿåº¦æå‡ï¼‰
- âœ… æ›´ç®€æ´çš„è¡¨å•ï¼ˆå¿…å¡«å­—æ®µä¼˜å…ˆï¼‰
- âœ… æ›´å¥½çš„æ–‡ä»¶å¤¹ç®¡ç†ï¼ˆè‡ªåŠ¨åˆ†ç»„ï¼‰
- âœ… æ›´ç°ä»£çš„ UI
- âœ… æ›´å¥½çš„æ‰¹é‡æ“ä½œæ”¯æŒ
- âœ… æŒç»­çš„ç»´æŠ¤å’Œæ›´æ–°

**é›¶ç ´åæ€§å˜æ›´ï¼š**
- âœ… æ‰€æœ‰ç°æœ‰å†…å®¹ä¿æŒä¸å˜
- âœ… å‰ç«¯ä»£ç æ— éœ€ä¿®æ”¹
- âœ… è®¤è¯æ–¹å¼ä¸å˜
- âœ… å·¥ä½œæµç¨‹ä¸å˜ï¼ˆæ›´å¥½ï¼‰

**ä¸‹æ¬¡æ–°å¢å¹´ä»½æ—¶ï¼š**
- åªéœ€åœ¨ Folders ä¸­åˆ›å»ºæ–°æ–‡ä»¶å¤¹
- ä¸éœ€è¦ä¿®æ”¹ config.yml
- Filter è‡ªåŠ¨åŒ¹é…æ–°æ–‡ä»¶å¤¹

---

**è¿ç§»å®Œæˆæ—¥æœŸï¼š** 2025-11-08
**è¿ç§»å·¥å…·ï¼š** Claude Code
**èŠ±è´¹æ—¶é—´ï¼š** ~30 åˆ†é’Ÿ
**é£é™©ç­‰çº§ï¼š** ä½ï¼ˆå®Œå…¨å…¼å®¹ï¼‰
**æ¨èæŒ‡æ•°ï¼š** â­â­â­â­â­
